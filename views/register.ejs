<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register</title>
</head>
<body>
    <h2>Register Yourself</h2>
    <form action="" method="post" enctype="application/x-www-form-urlencoded">
        <p style="color: red;">
            <%
                if(typeof error !== "undefined")
                {%>
                    <%= error %>
                <%}
            %>
        </p>
        <label for="name">Name</label>
        <input type="text" name="name" id="name" placeholder="Name">
        <br>
        <label for="name">Email</label>
        <input type="email" name="email" id="email" placeholder="Email">
        <br>
        <label for="name">Password</label>
        <input type="password" name="password" id="password" placeholder="Password">
        <br>
        <label for="role">Role</label>
        <select name="role" id="role">
            <option value="">- Select Role -</option>
        </select>
        <br>
        <button type="submit">Register</button>
    </form>

    <script>
        fetch('/roles')
        .then((response)=>{
            return response.json();
        })
        .then((data)=>{
            let op = ''
            data.roles.forEach(element => {
                op += `<option value='${element._id}'>${element.role}</option>`;
            });
            document.getElementById('role').innerHTML += op
        })
    </script>
</body>
</html>